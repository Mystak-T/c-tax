<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>法人税金試算フォーム</title>
  <link href="https://cdn.jsdelivr.net/npm/sanitize.css" rel="stylesheet">
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f4f4f4; }
    h1 { color: #333; }
    input, button { padding: 10px; margin: 10px 0; font-size: 1rem; }
    .result { background: #fff; padding: 1em; border-radius: 5px; }
    .note, .settings { background: #fff; padding: 1em; border-radius: 5px; margin-top: 1em; font-size: 0.9rem; color: #555; }
    label { display: block; margin-top: 10px; }
    .image-container { text-align: center; margin: 2em 0; }
    .image-container img { max-width: 100%; height: auto; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h1>法人税金 試算フォーム</h1>

  <div class="image-container">
    <img src="zeikin.png" alt="税のデンプシーロール">
  </div>

  <label for="profit">当期純利益（円）:</label>
  <input type="number" id="profit" placeholder="例：1,500,000"><br>

  <div class="settings">
    <strong>税率設定（変更可能）:</strong>
    <label>法人税率（%）<input type="number" id="corpTaxRate" value="15"></label>
    <label>地方法人税率（%）<input type="number" id="localCorpTaxRate" value="10.3"></label>
    <label>法人市民税率（%）<input type="number" id="cityTaxRate" value="6"></label>
    <label>法人県民税率（%）<input type="number" id="prefectureTaxRate" value="1"></label>
    <label>法人市民税均等割（円）<input type="text" id="cityFixed" value="50,000"></label>
    <label>法人県民税均等割（円）<input type="text" id="prefectureFixed" value="21,000"></label>
    <label>法人事業税率（%）<input type="number" id="businessTaxRate" value="3.5"></label>
    <label>特別法人事業税率（%）<input type="number" id="specialBusinessTaxRate" value="37"></label>
  </div>

  <button onclick="calculateTax()">税額を試算する</button>

  <div class="result" id="output"></div>

  <script>
    function format(num) {
      return Math.round(num).toLocaleString();
    }

    function parseFormattedNumber(str) {
      return parseFloat(str.replace(/,/g, '')) || 0;
    }

    function calculateTax() {
      const profit = parseFormattedNumber(document.getElementById('profit').value);
      if (isNaN(profit) || profit <= 0) {
        document.getElementById('output').innerHTML = "正しい金額を入力してください。";
        return;
      }

      const corpTaxRate = parseFloat(document.getElementById('corpTaxRate').value) / 100;
      const localCorpTaxRate = parseFloat(document.getElementById('localCorpTaxRate').value) / 100;
      const cityTaxRate = parseFloat(document.getElementById('cityTaxRate').value) / 100;
      const prefectureTaxRate = parseFloat(document.getElementById('prefectureTaxRate').value) / 100;
      const cityFixed = parseFormattedNumber(document.getElementById('cityFixed').value);
      const prefectureFixed = parseFormattedNumber(document.getElementById('prefectureFixed').value);
      const businessTaxRate = parseFloat(document.getElementById('businessTaxRate').value) / 100;
      const specialBusinessTaxRate = parseFloat(document.getElementById('specialBusinessTaxRate').value) / 100;

      const corpTax = profit * corpTaxRate;
      const localCorpTax = corpTax * localCorpTaxRate;
      const businessTax = profit * businessTaxRate;
      const specialBusinessTax = businessTax * specialBusinessTaxRate;
      const cityTax = corpTax * cityTaxRate + cityFixed;
      const prefectureTax = corpTax * prefectureTaxRate + prefectureFixed;

      const totalTax = corpTax + localCorpTax + cityTax + prefectureTax + businessTax + specialBusinessTax;

      document.getElementById('output').innerHTML = `
        <h2>試算結果</h2>
        <ul>
          <li>法人税: ${format(corpTax)}円</li>
          <li>地方法人税: ${format(localCorpTax)}円</li>
          <li>法人市民税: ${format(cityTax)}円</li>
          <li>法人県民税: ${format(prefectureTax)}円</li>
          <li>法人事業税: ${format(businessTax)}円</li>
          <li>特別法人事業税: ${format(specialBusinessTax)}円</li>
          <li><strong>合計税額: ${format(totalTax)}円</strong></li>
        </ul>
      `;
    }
  </script>
</body>
</html>
